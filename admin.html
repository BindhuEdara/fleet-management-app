<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin dashboard page</title>
</head>
<body>
  <h1>Welcome to Dashboard Page</h1>
  <button onclick="back()">Goto Login Page</button>

  <input type="text" placeholder="Reg No of Vehicle" id="Reg No of Vehicle" required>
  <select name="" id="Category" required>
    <option value="Auto">Auto</option>
    <option value="Car">Car</option>
    <option value="Truck">Truck</option>
    <option value="Bus">Bus</option>
  </select>
  <input type="text" id="DriverName" placeholder="DriverName" required>
  <select name="" id="Availability Status">
    <option value="">Available</option>
    <option value="">Unavailable</option>
  </select>
  <button onclick="addFleet()" id="addFleet">Add Fleet</button>
  <div id="vehicleContainer"></div>

    <select name="" id="Category Filter" onclick="categoryFilter()">
      <option value="All">All</option>
      <option value="Auto">Auto</option>
      <option value="Car">Car</option>
      <option value="Truck">Truck</option>
      <option value="Bus">Bus</option>
    </select>

    <select name="" id="availabilityFilter">
      <option value="All">All</option>
      <option value="Available">Available</option>
      <option value="Unavailable">Unavailable</option>
    </select>
</body>
<script>
  function back(){
    window.location.href="index.html"
  }
  let vehicles=[];

  let imageUrl ="https://coding-platform.s3.amazonaws.com/dev/lms/tickets/5e80fcb6-3f8e-480c-945b-30a5359eb40e/JNmYjkVr3WOjsrbu.png";

  function addFleet(){
    const vehNo
     = document.getElementById("Reg No of Vehicle").value;
    const category = document.getElementById("Category").value;
    const DriverName = document.getElementById("DriverName").value;
    const status = document.getElementById("Availablility Status").value;

    let vehicle = {
      vehNo,
      category,
      DriverName,
      status,
      imageUrl
    }

    document.getElementById("Reg No of Vehicle").value="";
    document.getElementById("Category").value="";
    document.getElementById("DriverName").value="";
    document.getElementById("Availablility Status").value="";

    vehicles.push(vehicle);
    renderData(vehicles);
  }

  function renderData(vehicleList){
    let container = document.getElementById("vehicleContainer");
    container.innerHTML="";

    vehicleList.forEach((vehicle, index)=>{
      let card = document.createElement('div')
      card.className="card";

      let image = document.createElement("image");
      image.src = vehicle.imageUrl;

      let vehNo = document.createElement('p');
      vehNo.textContent = vehicle.vehNo;

      let category = document.createElement('p');
      category.textContent = vehicle.category;

      let DriverName = document.createElement('p');
      DriverName.textContent = vehicle.DriverName;

      let status = document.createElement('p');
      status.textContent = vehicle.status;

      card.appendChild(image);
      card.appendChild(vehNo);
      card.appendChild(category);
      card.appendChild(DriverName);
      card.appendChild(status);

      container.appendChild(card);

      console.log(card);
    })
  }

  function categoryFilter(){
    let category = document.getElementById("Category Filter").values;

    if(category === 'All'){
      renderData(vehicles);
      return;
    }

    let filtered = vehicles.filter((vehicle => vehicle.category === category));
    renderData(filtered);
  }

  function availabilityFilter(){
    let availabilityFilter = document.getElementById("availabilityFilter");

    if(availabilityFilter === "All"){
      renderData(vehicles);
      return;
    }

    let filtered = vehicles.filter((vehilce => vehicle.Availability Status === Availability Status));
    renderData(filtered);
  }

</script>
</html>
